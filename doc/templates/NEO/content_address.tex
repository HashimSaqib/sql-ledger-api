%%% Definition of address fields %%%

% Defines the delivery address:
\newcommand{\ShiptoAddress}{
     \ifthenelse{\equal{<%shiptoname%>}{}}{}{<%shiptoname%>\\}
     \ifthenelse{\equal{<%shiptoaddress1%>}{}}{}{<%shiptoaddress1%>\\}
     \ifthenelse{\equal{<%shiptoaddress2%>}{}}{}{<%shiptoaddress2%>\\}
     \ifthenelse{\equal{<%shiptocity%>}{}}{}{<%shiptozipcode%> <%shiptocity%>\\}
     \ifthenelse{\equal{<%shiptocountry%>}{}}{}{<%shiptocountry%>\\}
}

% Defines the address:
\newcommand{\Address}{
     \ifthenelse{\equal{<%typeofcontact%>}{company}}{

          % If address is a company address:
          <%name%>\\
          \ifthenelse{\equal{<%salutation%>}{}}{}{<%salutation%> }\ifthenelse{\equal{<%contacttitle%>}{}}{}{<%contacttitle%> }\ifthenelse{\equal{<%firstname%>}{}}{}{<%firstname%> }\ifthenelse{\equal{<%lastname%>}{}}{}{<%lastname%>\\}
          \ifthenelse{\equal{<%address1%>}{}}{}{<%address1%>\\}
          \ifthenelse{\equal{<%address2%>}{}}{}{<%address2%>\\}
           <%zipcode%> <%city%>\\
          \ifthenelse{\equal{<%country%>}{}}{}{<%country%>}
     }{
          % If address is a person address:
          \ifthenelse{\equal{<%salutation%>}{}}{}{<%salutation%>\\}
          \ifthenelse{\equal{<%contacttitle%>}{}}{<%firstname%> <%lastname%>\\}                              
          {<%contacttitle%> <%firstname%> <%lastname%>\\}
          \ifthenelse{\equal{<%address1%>}{}}{}{<%address1%>\\}
          \ifthenelse{\equal{<%address2%>}{}}{}{<%address2%>\\}
          <%zipcode%> <%city%>\\
          \ifthenelse{\equal{<%country%>}{}}{}{<%country%>}
     }
}

\ifthenelse{\equal{\Addressblock}{right}}{\begin{textblock*}{6.5cm}(11.85cm,6.10cm)}{}
\ifthenelse{\equal{\Addressblock}{left}}{\begin{textblock*}{6.5cm}(1.8cm,6.10cm)}{}
\ifthenelse{\equal{\Addressblock}{pingenleft}}{\begin{textblock*}{6.5cm}(2.25cm,6.10cm)}{}

% If the sender address should appear in the address block: 
%\underline{\tiny{<%company%>, \BeforeSubString{ --}{<%address%>}, \BehindSubString{-- }{<%address%>}}}

\ifthenelse{\equal{\DocType}{Lieferschein}}{\ShiptoAddress}{\Address}

\end{textblock*}